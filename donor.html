<!DOCTYPE html>
<html ng-app="DonarApp">
    <head>
   <title>Donate.com</title>
   <script src="https://ajax.googleapis.com/ajax/libs/angularjs/1.8.2/angular.min.js"></script>
   <link rel="stylesheet" href="donarstyle.css">

   </head>
   <body ng-controller="Donarctrl">
    <h1>Donar Informtion</h1>
    <input type="text" placeholder="Name" ng-model="don.name" required>
    <input type="number" placeholder="Fund" ng-model="don.fund" required>
    <input type="text" placeholder="Address" ng-model="don.address" required>
    <button ng-click="addDonar()" ng-hide="editmode">ADD</button>
    <button ng-click="Updatedonar()" ng-show="editmode">Update</button>

    <form>
        <table>
            <thead>
                <th>Name</th>
                <th>Fund</th>
                <th>Address</th>
                <th>Action</th>
            </thead>
            <tbody>
            <tr ng-repeat="d in Donars">
              <td> {{d.name}}</td>
              <td>{{d.fund}}</td>
               <td>{{d.address}}</td>
               <td><button ng-click="deletedonar(d._id)">delete</button></td>
              <td> <button ng-click="editdonar(d)">edit</button></td>
            </tr>
            </tbody>

        </table>
    </form>
    <footer>Thanks for donation.Visit us aggain</footer>
    <script>
        var app=angular.module('DonarApp',[]);
        app.controller('Donarctrl',function($scope,$http)
    {
$scope.Donars=[];
$scope.don={};
$scope.editmode=false;
function loadDonor()
{
    $http.get('http://localhost:3000/Donars').then(res=>
        {
            $scope.Donars=res.data;
        });
}
loadDonor();

$scope.addDonar=function()
{
    $http.post('http://localhost:3000/Donars',$scope.don).then(res=>
        {
            $scope.don={};
            loadDonor();

        }
    );
}
$scope.editdonar=function(donor)
{
    $scope.don=angular.copy(donor);
    $scope.editmode=true;
};


$scope.Updatedonar=function()
{
    $http.put('http://localhost:3000/Donars'+$scope.don._id,$scope.don).then(res=>
        {
            $scope.don={};
            $scope.editmode=false;
            loadDonor();

        }
    );
}



$scope.deletedonar=function(id)
{
    $http.delete('http://localhost:3000/Donars/'+id).then(res=>
        {
           
            loadDonor();

        }
    );
}
});
    </script>
   </body>

</html>